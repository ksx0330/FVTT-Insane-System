<form class="{{cssClass}}" autocomplete="off">

  <div class="sheet-wrapper">
    <button style="display: none;">Input Button Click bypass</button>
    {{!-- Sheet Header --}}
    <header class="sheet-header">
      <input class="input--title" name="name" type="text" value="{{actor.name}}" placeholder="Name"/>

      <div class="header-box">
        <button type="button" class="icon-button evasion-roll"><i class="fas fa-running"></i></button>
      </div>
    </header>

    <section class="sheet-main">
      <div class="sheet-attributes">

        <div class="cell cell--img">
          <img class="profile-img" src="{{actor.img}}" data-edit="img" title="{{actor.name}}" height="100" width="100"/>
        </div>

        <div class="cell cell--attr">
          <div class="cell--horizon">

            <div class="cell">
              <label class="cell--title">{{localize "INSANE.HP"}}<i class="fas fa-heart attribute-icon"></i></label>
              <label class="cell--title">{{localize "INSANE.Sanity"}}<i class="fas fa-brain"></i></label>
              <label class="cell--title">{{localize "INSANE.Curiosity"}}<i class="fas fa-address-card"></i></label>
              <label class="cell--title">{{localize "INSANE.Exp"}}<i class="fas fa-chart-line"></i></label>
            </div>

            <div class="cell margin-left-10">
              <div class="cell--horizon cell--counter">
                <input type="text" class="number-input" name="data.health.value" value="{{data.health.value}}" data-dtype="Number"/>
                <span class="slash"> / </span>
                <input type="text" class="number-input" name="data.health.max" value="{{data.health.max}}" data-dtype="Number"/>
              </div>

              <div class="cell--horizon cell--counter">
                <input type="text" class="number-input" name="data.sanity.value" value="{{data.sanity.value}}" data-dtype="Number"/>
                <span class="slash"> / </span>
                <input type="text" class="number-input" name="data.sanity.max" value="{{data.sanity.max}}" data-dtype="Number"/>
              </div>

              <div class="cell--select">
                <select name="data.talent.curiosity">
                  {{#select data.talent.curiosity}}
                  <option value="0">-</option>
                  <option value="1">{{localize "INSANE.A1"}}</option>
                  <option value="2">{{localize "INSANE.B1"}}</option>
                  <option value="3">{{localize "INSANE.C1"}}</option>
                  <option value="4">{{localize "INSANE.D1"}}</option>
                  <option value="5">{{localize "INSANE.E1"}}</option>
                  <option value="6">{{localize "INSANE.F1"}}</option>
                  {{/select}}
                </select>
              </div>

              <div class="cell--exp">
                <input type="text" name="data.details.exp" value="{{data.details.exp}}" data-dtype="Number">
              </div>
            </div>
          </div>


        </div>

        <div class="cell cell--items">
          <label class="cell--title">{{localize "INSANE.ItemsList"}}
            <div class="item-controls">
              <button class="item-control item-create white-btn" data-type="item">
                <i class="fas fa-plus" style="color: white;"></i>
              </button>
            </div>
          </label>

          <div class="items-list">
          {{#each actor.itemList as |item id|}}
            <li class="item flexrow" data-item-id="{{item.id}}" draggable="true">
              <h4 class="item-name">
                  <span class="echo-item"><img src="{{item.img}}" title="{{item.name}}" width="30" height="30" style="vertical-align : middle;margin-right:10px;"></i></span> 
                  <span class="item-label">{{item.name}}

                      <span class="item-details-toggle">
                          <i class="fas fa-chevron-down"></i>
                      </span>
                  </span>
              </h4>

              <h4 class="item-addon">
                <button type="button" class="icon-button quantity-change" data-add="-1">-</button>
                <span>{{item.data.quantity}}</span>
                <button type="button" class="icon-button quantity-change" data-add="1">+</button>
                <button type="button" class="use-button use-word use-item">{{localize "INSANE.Use"}}</button>
              </h4>

              <div class="item-controls">
                <a class="item-control item-edit" title="Edit Item"><i class="fas fa-edit"></i></a>
                <a class="item-control item-delete" title="Delete Item"><i class="fas fa-trash"></i></a>
              </div>
              <div class="item-description">
                <p>{{{item.data.description}}}</p>
              </div>
            </li>
          {{/each}}
          </div>


        </div>
      </div>

      {{!-- Sheet Tab Navigation --}}
      <nav class="sheet-tabs tabs" data-group="primary">
        <a class="item" data-tab="skill">{{localize "INSANE.Skill"}}</a>
        <a class="item" data-tab="description">{{localize "INSANE.Description"}}</a>
        <a class="item" data-tab="ability">{{localize "INSANE.Ability"}}</a>
        <a class="item" data-tab="bonds">{{localize "INSANE.Bonds"}}</a>
        <a class="item" data-tab="secret">{{localize "INSANE.Secret"}}</a> 
      </nav>


      {{!-- Sheet Body --}}
      <section class="sheet-body">

        {{!-- Talent Tab --}}
        <div class="tab skill" data-group="primary" data-tab="skill">
          <div class="cell">
            <h2 class="cell--title">{{localize "INSANE.Skill"}}</h2>
          </div>
          <div class="talent-table">
          <table class="{{lang}}">
              <colgroup>
                  <col span="1" class="talent-num">
                  <col span="1" class="talent-gap">
                  <col span="1" class="talent-name">
                  <col span="1" class="talent-gap">
                  <col span="1" class="talent-name">
                  <col span="1" class="talent-gap">
                  <col span="1" class="talent-name">
                  <col span="1" class="talent-gap">
                  <col span="1" class="talent-name">
                  <col span="1" class="talent-gap">
                  <col span="1" class="talent-name">
                  <col span="1" class="talent-gap">
                  <col span="1" class="talent-name">
                  <col span="1" class="talent-num">
              </colgroup>

              <tbody>
                  <tr>
                      <th></th>
                      <td class="gap"><input class="talent-checkbox" type="checkbox" name="data.talent.gap.0"  {{#if data.talent.gap.[0]}} checked {{/if}}></td>
                      <th class="talent-header">
                        <div class="header-name">{{localTalent "INSANE.A1"}}</div>
                      </th>

                      <td class="gap"><input class="talent-checkbox" type="checkbox" name="data.talent.gap.1"   {{#if data.talent.gap.[1]}} checked {{/if}}></td>
                      <th class="talent-header">
                        <div class="header-name">{{localTalent "INSANE.B1"}}</div>
                      </th>

                      <td class="gap"><input class="talent-checkbox" type="checkbox" name="data.talent.gap.2"  {{#if data.talent.gap.[2]}} checked {{/if}}></td>
                      <th class="talent-header">
                        <div class="header-name">{{localTalent "INSANE.C1"}}</div>
                      </th>

                      <td class="gap"><input class="talent-checkbox" type="checkbox" name="data.talent.gap.3"  {{#if data.talent.gap.[3]}} checked {{/if}}></td>
                      <th class="talent-header">
                        <div class="header-name">{{localTalent "INSANE.D1"}}</div>
                      </th>

                      <td class="gap"><input class="talent-checkbox" type="checkbox" name="data.talent.gap.4" {{#if data.talent.gap.[4]}} checked {{/if}}></td>
                      <th class="talent-header">
                        <div class="header-name">{{localTalent "INSANE.E1"}}</div>
                      </th>

                      <td class="gap"><input class="talent-checkbox" type="checkbox" name="data.talent.gap.5" {{#if data.talent.gap.[5]}} checked {{/if}}></td>
                      <th class="talent-header">
                        <div class="header-name">{{localTalent "INSANE.F1"}}</div>
                      </th>

                      <th></th>
                  </tr>
                  {{#each data.tables}}  
                  <tr>
                      <th>{{number}}</th>
                      <td {{#if ../data.talent.gap.[0]}} class="active" {{/if}}></td>
                      <td class="{{#if line.[0].state}} checked {{/if}} {{#if line.[0].fear}} feared {{/if}} {{#if line.[0].subTitle}} subTitle {{/if}}" >
                          <input class="talent-checkbox" type="checkbox" name="{{line.[0].name}}.state" {{#if line.[0].state}} checked {{/if}} >
                          <input type="hidden" name="{{line.[0].name}}.num" value="{{line.[0].num}}">
                          <input type="hidden" name="{{line.[0].name}}.fear" value="{{line.[0].fear}}" data-dtype="Boolean">
                          <div class="talent-name" data-title="{{localTalent line.[0].title}}" data-num="{{line.[0].num}}" data-id="{{line.[0].id}}" data-stop="{{line.[0].fear}}">{{localTalent line.[0].title}} / {{line.[0].num}}</div>
                      </td>

                      <td {{#if ../data.talent.gap.[1]}} class="active" {{/if}}></td>
                      <td  class="{{#if line.[1].state}} checked {{/if}} {{#if line.[1].fear}} feared {{/if}} {{#if line.[1].subTitle}} subTitle {{/if}}" >
                          <input class="talent-checkbox" type="checkbox" name="{{line.[1].name}}.state" {{#if line.[1].state}} checked {{/if}} >
                          <input type="hidden" name="{{line.[1].name}}.num" value="{{line.[1].num}}">
                          <input type="hidden" name="{{line.[1].name}}.fear" value="{{line.[1].fear}}" data-dtype="Boolean">
                          <div class="talent-name" data-title="{{localTalent line.[1].title}}" data-num="{{line.[1].num}}" data-id="{{line.[1].id}}" data-stop="{{line.[1].fear}}">{{localTalent line.[1].title}} / {{line.[1].num}}</div>
                      </td>

                      <td {{#if ../data.talent.gap.[2]}} class="active" {{/if}}></td>

                      <td class="{{#if line.[2].state}} checked {{/if}} {{#if line.[2].fear}} feared {{/if}} {{#if line.[2].subTitle}} subTitle {{/if}}" >
                          <input class="talent-checkbox" type="checkbox" name="{{line.[2].name}}.state" {{#if line.[2].state}} checked {{/if}} >
                          <input type="hidden" name="{{line.[2].name}}.num" value="{{line.[2].num}}">
                          <input type="hidden" name="{{line.[2].name}}.fear" value="{{line.[2].fear}}" data-dtype="Boolean">
                          <div class="talent-name" data-title="{{localTalent line.[2].title}}" data-num="{{line.[2].num}}" data-id="{{line.[2].id}}" data-stop="{{line.[2].fear}}">{{localTalent line.[2].title}} / {{line.[2].num}}</div>
                      </td>

                      <td {{#if ../data.talent.gap.[3]}} class="active" {{/if}}></td>

                      <td class="{{#if line.[3].state}} checked {{/if}} {{#if line.[3].fear}} feared {{/if}} {{#if line.[3].subTitle}} subTitle {{/if}}" >
                          <input class="talent-checkbox" type="checkbox" name="{{line.[3].name}}.state" {{#if line.[3].state}} checked {{/if}} >
                          <input type="hidden" name="{{line.[3].name}}.num" value="{{line.[3].num}}">
                          <input type="hidden" name="{{line.[3].name}}.fear" value="{{line.[3].fear}}" data-dtype="Boolean">
                          <div class="talent-name" data-title="{{localTalent line.[3].title}}" data-num="{{line.[3].num}}" data-id="{{line.[3].id}}" data-stop="{{line.[3].fear}}">{{localTalent line.[3].title}} / {{line.[3].num}}</div>
                      </td>

                      <td {{#if ../data.talent.gap.[4]}} class="active" {{/if}}></td>

                      <td class="{{#if line.[4].state}} checked {{/if}} {{#if line.[4].fear}} feared {{/if}} {{#if line.[4].subTitle}} subTitle {{/if}}" >
                          <input class="talent-checkbox" type="checkbox" name="{{line.[4].name}}.state" {{#if line.[4].state}} checked {{/if}} >
                          <input type="hidden" name="{{line.[4].name}}.num" value="{{line.[4].num}}">
                          <input type="hidden" name="{{line.[4].name}}.fear" value="{{line.[4].fear}}" data-dtype="Boolean">
                          <div class="talent-name" data-title="{{localTalent line.[4].title}}" data-num="{{line.[4].num}}" data-id="{{line.[4].id}}" data-stop="{{line.[4].fear}}">{{localTalent line.[4].title}} / {{line.[4].num}}</div>
                      </td>

                      <td {{#if ../data.talent.gap.[5]}} class="active" {{/if}}></td>

                      <td class="{{#if line.[5].state}} checked {{/if}} {{#if line.[5].fear}} feared {{/if}} {{#if line.[5].subTitle}} subTitle {{/if}}" >
                          <input class="talent-checkbox" type="checkbox" name="{{line.[5].name}}.state" {{#if line.[5].state}} checked {{/if}} >
                          <input type="hidden" name="{{line.[5].name}}.num" value="{{line.[5].num}}">
                          <input type="hidden" name="{{line.[5].name}}.fear" value="{{line.[5].fear}}" data-dtype="Boolean">
                          <div class="talent-name" data-title="{{localTalent line.[5].title}}" data-num="{{line.[5].num}}" data-id="{{line.[5].id}}" data-stop="{{line.[5].fear}}">{{localTalent line.[5].title}} / {{line.[5].num}}</div>
                      </td>
                      <th>{{number}}</th>
                  </tr>
                  {{/each}}
              </tbody>
          </table>

          <input type="hidden" name="data.talent.subTitle.id" value="{{data.talent.subTitle.id}}">
          <input type="hidden" name="data.talent.subTitle.title" value="{{data.talent.subTitle.title}}">
          <input type="hidden" name="data.talent.subTitle.state" value="{{data.talent.subTitle.state}}" data-dtype="Boolean">

          </div>
        </div>

        {{!-- Biography Tab --}}
        <div class="tab biography" data-group="primary" data-tab="description">
            <div class="cell">
              <h2 class="cell--title">{{localize "INSANE.Basic"}}</h2>
            </div>
            <table>
                <tr>
                  <th>{{localize "INSANE.Age"}}</th>
                  <td><input type="text" name="data.details.age" value="{{data.details.age}}"></td>
                  <th>{{localize "INSANE.Gender"}}</th>
                  <td><input type="text" name="data.details.sex" value="{{data.details.sex}}"></td>
              </tr>
              <tr>
                  <th>{{localize "INSANE.Job"}}</th>
                  <td><input type="text" name="data.details.job" value="{{data.details.job}}"></td>
                  <th>{{localize "INSANE.Exp"}}</th>
                  <td style="text-align: center;">{{data.details.exp}}</td>
              </tr>
              <tr>
                  <th>{{localize "INSANE.Fear"}}</th>
                  <td colspan="3"><input type="text" name="data.details.fear" value="{{data.details.fear}}"></td>
              </tr>

            </table>

            <div class="cell">
              <h2 class="cell--title">{{localize "INSANE.Memo"}}</h2>
            </div>
            {{editor content=data.details.biography target="data.details.biography" button=true owner=owner editable=editable}}
        </div>

        {{!-- Owned Ability Tab --}}
        <div class="tab items" data-group="primary" data-tab="ability">
          <div class="cell cell--common-talent">
            <h2 class="cell--title">
              <label>{{localize "INSANE.AbilityList"}}</label>
              <div class="item-controls">
                <button type="button" class="item-control item-create" data-type="ability">
                  <i class="fas fa-plus"></i>
                </button>
              </div>
            </h2>
            <ol class="items-list">
            {{#each actor.abilityList as |item id|}}

              <li class="item flexrow" data-item-id="{{item.id}}" draggable="true">
                
                <h4 class="item-name">
                    <span class="echo-item" style="float:left;">
                        <img src="{{item.img}}" title="{{item.name}}" width="37" height="37" style="vertical-align : middle;margin-right:10px;">
                    </span> 
                    <span class="item-label">{{item.name}}<br>
                    <span style="color : gray; font-size : smaller;">
                        <b>{{localize "INSANE.Type"}}</b> : {{item.data.type}} /
                        <b>{{localize "INSANE.Talent"}}</b> : {{item.data.talent}}
                        
                    <span class="item-details-toggle"><i class="fas fa-chevron-down"></i></span>
                    </span></span>
                </h4>
                
                
                <div class="item-controls">
                  <a class="item-control item-edit" title="Edit Item"><i class="fas fa-edit"></i></a>
                  <a class="item-control item-delete" title="Delete Item"><i class="fas fa-trash"></i></a>
                </div>
                <div class="item-description">
                  <p>{{{item.data.description}}}</p>
                </div>
              </li>

            {{/each}}
            </ol>
          </div>
        </div>

        {{!-- Owned Bonds Tab --}}
        <div class="tab items" data-group="primary" data-tab="bonds">
          <div class="cell cell--common-talent">
            <h2 class="cell--title">
              <label>{{localize "INSANE.BondsList"}}</label>
              <div class="item-controls">
                <button type="button" class="item-control item-create" data-type="bond">
                  <i class="fas fa-plus"></i>
                </button>
              </div>
            </h2>
            <ol class="items-list">
            {{#each actor.bondList as |item id|}}
              <li class="item flexrow" data-item-id="{{item.id}}" draggable="true">
                
                <h4 class="item-name">
                    <span class="echo-item" style="float:left;">
                        <img src="{{item.img}}" title="{{item.name}}" width="37" height="37" style="vertical-align : middle;margin-right:10px;">
                    </span> 
                    <span class="item-label">{{item.name}}<br>
                    <span style="color : gray; font-size : smaller;">
                        <b>{{localize "INSANE.Residence"}}</b> : {{#if item.data.residence}} O {{else}} X {{/if}} /
                        <b>{{localize "INSANE.Secret"}}</b> : {{#if item.data.secret}} O {{else}} X {{/if}} /
                        <b>{{localize "INSANE.Feeling"}}</b> : {{item.data.feeling}}
                        
                    <span class="item-details-toggle"><i class="fas fa-chevron-down"></i></span>
                    </span></span>
                </h4>

                <div class="item-controls">
                  <a class="item-control item-edit" title="Edit Item"><i class="fas fa-edit"></i></a>
                  <a class="item-control item-delete" title="Delete Item"><i class="fas fa-trash"></i></a>
                </div>
                <div class="item-description">
                        <p>{{{item.data.description}}}</p>
                </div>
              </li>
            {{/each}}
            </ol>
          </div>
        </div>

        {{!-- Owned Secret Tab --}}
        <div class="tab items" data-group="primary" data-tab="secret">
          <div class="cell cell--common-talent">
            <h2 class="cell--title">
              <label>{{localize "INSANE.Handout"}}</label>
              <div class="item-controls">
                <button type="button" class="item-control item-create" data-type="handout" >
                  <i class="fas fa-plus"></i>
                </button>
              </div>
            </h2>
            <ol class="items-list">
            {{#each actor.handoutList as |item id|}}

            {{#ifOR ../isGM (checkVisible item.data.visible ../userId)}} 
              <li class="item flexrow" data-item-id="{{item.id}}" draggable="true">

                <h4 class="item-name">
                    <span class="echo-item">
                        <img src="{{item.img}}" title="{{item.name}}" width="37" height="37" style="vertical-align : middle;margin-right:10px;">
                    </span> 
                    <span class="item-label">{{item.name}}<span class="item-details-toggle"><i class="fas fa-chevron-down"></i></span>
                    </span></span>
                </h4>

                <div class="item-controls">
                  <a class="item-control item-edit" title="Edit Item"><i class="fas fa-edit"></i></a>
                  <a class="item-control item-delete" title="Delete Item"><i class="fas fa-trash"></i></a>
                </div>
                <div class="item-description" style="box-shadow: 4px 5px 12px; width: 98%; margin-top: 2px;">
                  <p>{{{item.data.description}}}</p>
                  {{#ifOR ../isGM (checkVisible item.data.sVisible ../userId)}} 
                  <hr style="margin: 8px 0;">
                  <p>{{{item.data.secret}}}</p>
                  {{/ifOR}}
                </div>
              </li>
            {{/ifOR}}
              
            {{/each}}
            </ol>
          </div>

        </div>


      </section>

    </section>
  </div>
</form>

